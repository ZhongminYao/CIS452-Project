<!DOCTYPE html>
    <html lang="en" dir="ltr">
      <head>
        <meta charset="utf-8">
        <title>Textbook Listings</title>
        <link rel="stylesheet" href="stylesheet.css">
        <script src="https://www.gstatic.com/firebasejs/5.8.2/firebase.js"></script>
        <!-- update the version number as needed -->
        <script defer src="/__/firebase/5.8.2/firebase-app.js"></script>
        <!-- include only the Firebase features as you need -->
        <script defer src="/__/firebase/5.8.2/firebase-auth.js"></script>
        <script defer src="/__/firebase/5.8.2/firebase-database.js"></script>
        <script defer src="/__/firebase/5.8.2/firebase-messaging.js"></script>
        <script defer src="/__/firebase/5.8.2/firebase-storage.js"></script>
        <!-- initialize the SDK after all desired features are loaded -->
        <script defer src="/__/firebase/init.js"></script>
        <script>
        // create database object
        function createTable(){
          var db = firebase.firestore();
          var tableRef = document.getElementById('table').getElementsByTagName('tbody')[0];

        // get snapshot of textbooks
          db.collection('Textbooks').get().then(function(querySnapshot) {
            querySnapshot.forEach(function(doc){
            // doc.data() is never undefined for query doc snapshots
            var data = doc.data();
            // get individual fields

            var title = data.Title;
            var author = data.Author;
            var price = data.Price;

            // Insert a row in the table at the last row
            var newRow = tableRef.insertRow(tableRef.rows.length);

            // Insert 3 cells in the row
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);

            // Append a text node to the cell
            var text1 = document.createTextNode(title);
            var text2 = document.createTextNode(author);
            var text3 = document.createTextNode(price);

            cell1.appendChild(text1);
            cell2.appendChild(text2);
            cell3.appendChild(text3);

            });
          });
        }
        </script>

        <style>

          table {
            width: 100%;
            height: 50px;
            text-align: left;
            border-collapse: collapse;

          }

          table thead {
             padding-top: 20px;
             padding-bottom: 20px;
             text-align: left;
             background-color: #778899;
             color: white;
          }

          table th, td{
            border: 1px solid #ddd;
            padding: 8px;
          }

        </style>
      </head>
      <body>
        <header>
          <nav>
            <ul>
              <li><a href="./home.html">Home</a></li>
              <li><a href="./cart.html">Cart</a></li>
              <li><a href="./buy.html">Buy</a></li>
              <li><a href="./sell.html">Sell</a></li>
            </ul>
          </nav>
        </header>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyAmEbdMxefi-2wt7u8_hrFHLixM_RCLmwE",
            authDomain: "cis-454.firebaseapp.com",
            databaseURL: "https://cis-454.firebaseio.com",
            projectId: "cis-454",
            storageBucket: "cis-454.appspot.com",
            messagingSenderId: "737490005392"
          };
          firebase.initializeApp(config);
        </script>
        <main>
          <table id="table">
            <thead>
          	  <tr>
          	    <th>Title</th>
          	    <th>Author</th>
          	    <th>Price</th>
              </tr>
            </thead>
            <tbody>
              <script>
              createTable();
              </script>
            </tbody>
        	</table>
        </main>


      </body>
    </html>
